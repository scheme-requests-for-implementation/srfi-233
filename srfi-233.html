<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>SRFI 233: INI files</title>
    <link href="/favicon.png" rel="icon" sizes="192x192" type="image/png">
    <link rel="stylesheet" href="https://srfi.schemers.org/srfi.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1"></head>
  <body>
    <h1><a href="https://srfi.schemers.org/"><img class="srfi-logo" src="https://srfi.schemers.org/srfi-logo.svg" alt="SRFI surfboard logo" /></a>233: INI files</h1>

<p>by John Cowan (text), Arvydas Silanskas (code)</p>

<h2 id="status">Status</h2>

<p style="color: red;">For editor's use only.  Please do not edit this section.</p>

<p>??? the draft/final/withdrawn status of the SRFI, information on how
to subscribe to its mailing list, and important dates in its history.
The editor will add this section.</p>

<h2 id="abstract">Abstract</h2>

<p>An INI file is a configuration file that consists of key-value
pairs for properties, and sections that group the properties. The
name of these configuration files comes from the filename extension
<code>INI</code>, short for initialization.
The format has become an informal standard in many contexts of configuration.
This SRFI provides access to the contents of an INI file.
</p>

<h2 id="issues">Issues</h2>

<p>
None at present.
</p>

<h2 id="rationale">Rationale</h2>

<p>Although INI files have been declared obsolete on several different occasions,
their simplicity has kept them in use in many differentt environments.
Although the format is not well specified, it is also quite forgiving;
it can readily be edited by hand, which is both an advantage and a disadvantage.
This library does not impose any rules beyond the simplest ones: for example,
there are a variety of conventions for nested sections in the wild,
but it is up to users of the library to interpret a specific convention.
Similarly, there is no enforcement of the convention that all keys within
a section must be unique, or of case-sensitivity or insensitivity.
</p>

<h2 id="specification">Specification</h2>

<p>An INI file is a simple line-based configuration format.  There are many variations;
this SRFI requires support for at least the following:</p>
<ul>
<li><p>Comments begin with &#39;;&#39; and are removed from lines.</p>
</li>
<li><p>Blank lines and leading and trailing whitespace are ignored.</p>
</li>
<li><p>The beginning of a section is marked by a line beginning with <code>[</code> and ending with <code>]</code>.
Sections do not nest.  The name of a section is the characters between the brackets.</p>
</li>
<li><p>Other lines containing <code>=</code> are treated as key-value pairs within the current section or, if
they precede any section line, as key-value pairs belonging to a section
whose name is the empty string.
Whitespace immediately before or after the <code>=</code> is ignored.</p>
</li>
<li><p>Any other lines are treated as keys whose value is the empty string.</p>
</li>
</ul>
<p><code>(make-ini-file-generator</code>&nbsp;<em>inport</em><code>)</code></p>
<p>Returns a generator that reads one or more lines from <em>inport</em> and returns a list of three strings:
the current section name, the key, and the value.  If no section names have been read, the
section name is the empty string.  When the port returns an end of file object, it is closed and
the generator returns an end of file object.</p>
<p><code>(make-ini-file-accumulator</code>&nbsp;<em>outport</em><code>)</code></p>
<p>Returns an accumulator that writes to outport.  If the argument passed to the accumulator
is a list of three strings, a key-value line, preceded if necessary by a section line,
is written.  If the argument is a single string, it is prefixed by <code>&quot;; &quot;</code> and written out.
In either case, the accumulator returns an unspecified value.
If the argument is an end of file object, <em>outport</em> is closed and the end of file object returned.</p>

<h2 id="example">Example</h2>
<p>The following is an example of an INI file:

<pre>
; Be sure to update the following line
last_modified_date=2022-08-10

[other]
quiet=/qa

[install]
allusers=true
as_admin_username=admin
as_instance=localhost
applicationusers=allusers
cadnode=businessabcdef
cadport=6410
clientauditingport=6420
clientlanguage=en
clustercms=false
databasedb=boe120
databasepwd_sqlanywhereroot=password1
databaseserver_audit=localhost
enablelogfile=true
enableservers=true
install.lp.en.selected=true
install.lp.fr.selected=true
installdbtype=sql
installmode=new
installswitch=server
install_db_type=sqlanywhere
mysqlport=3306
nsport=6400
privileged=true
username=business objects
website_metabase_number=true

[features]
remove=wcadotnet,webapplicationcontainer
</pre>

<p>Calling <code>make-ini-file-generator</code> on
a character input stream containing this example will
return a generator which generates the following lists:

<pre>
("" "last_modified_date", "2022-08-10")
("other" "quiet" "/qa")
("install" "allusers" "true")
("install" "as_admin_username" "admin")
("install" "as_instance" "localhost")
("install" "applicationusers" "allusers")
("install" "cadnode" "businessabcdef")
("install" "cadport" "6410")
("install" "clientauditingport" "6420")
("install" "clientlanguage" "en")
("install" "clustercms" "false")
("install" "databasedb" "boe120")
("install" "databasepwd_sqlanywhereroot" "password1")
("install" "databaseserver_audit" "localhost")
("install" "enablelogfile" "true")
("install" "enableservers" "true")
("install" "install.lp.en.selected" "true")
("install" "install.lp.fr.selected" "true")
("install" "installdbtype" "sql")
("install" "installmode" "new")
("install" "installswitch" "server")
("install" "install_db_type" "sqlanywhere")
("install" "mysqlport" "3306")
("install" "nsport" "6400")
("install" "privileged" "true")
("install" "username" "business objects")
("install" "website_metabase_number" "true")
("features" "remove" "wcadotnet,webapplicationcontainer")
</pre>

<h2 id="implementation">Implementation</h2>

<p>The sample implementation is in the <a href="https://github.com/scheme-requests-for-implementation/srfi-233">SRFI 223 repository</a>.</p>

<h2 id="acknowledgements">Acknowledgements</h2>

<p>Thanks to the participants on the SRFI 233 mailing list.</p>

<h2 id="copyright">Copyright</h2>
<p>&copy; 2022 John Cowan, Arvydas Silanskas.</p>

<p>
  Permission is hereby granted, free of charge, to any person
  obtaining a copy of this software and associated documentation files
  (the "Software"), to deal in the Software without restriction,
  including without limitation the rights to use, copy, modify, merge,
  publish, distribute, sublicense, and/or sell copies of the Software,
  and to permit persons to whom the Software is furnished to do so,
  subject to the following conditions:</p>

<p>
  The above copyright notice and this permission notice (including the
  next paragraph) shall be included in all copies or substantial
  portions of the Software.</p>
<p>
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
  BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
  ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
  CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  SOFTWARE.</p>

  <hr>
  <address>Editor: <a href="mailto:srfi-editors+at+srfi+dot+schemers+dot+org">Arthur A. Gleckler</a></address></body></html>
